{% extends "administrator/base.html" %}

{% block main_content %}


<div class="page-header">
<h2>Recent Uploads</h2>
</div>

{% for photo in photos.object_list %}
{% if forloop.counter == 1 or forloop.counter == 5 or forloop.counter == 9 or forloop.counter == 13 %}
<ul class="thumbnails row">
{% endif %}
    <div class="modal hide fade" id="deletePhoto_{{ photo.id }}">
        <div class="modal-header">
          <a data-dismiss="modal" class="close">Ã—</a>
          <h3>Delete {{ photo.title }}?</h3>
        </div>
        <div class="modal-body">
          <div class="row">
          <div class="span3">
          <h4>Are you sure you want to delete this photo?</h4>
          </div>
          <div class="span2">
              <div class="thumbnail">
                  {% load thumbnail %}
                  {% thumbnail photo.image "240x161" crop="center" as im %}
                  <img src="{{ im.url }}">
                  {% endthumbnail %}
              </div>
          </div>
          </div>
        </div>
        <div class="modal-footer">
          <a data-dismiss="modal" class="btn" href="#">Close</a>
          <a class="btn btn-danger" href="#">Confirm Delete</a>
        </div>
        </form>
      </div>


    <li class="span2 thumb">
    <a class="thumbnail" href="#">
    {% load thumbnail %}
    {% thumbnail photo.image "240x161" crop="center" as im %}
        <img src="{{ im.url }}">
                
        <a class="btn edit-photo"><i class="icon-pencil"></i> Edit</a>
    {% endthumbnail %}
    </a>
    <div class="caption">
        <div class="controls">
            <form method="POST" action="{% url administrator.views.edit_photo photo_id=photo.id %}">
            {% csrf_token %}
            <input type="text" name="title" value="{{ photo.title }}" class="span2">
            <textarea class="span2" name="description">{{ photo.description }}</textarea>
            <label>Album</label>
            <select name="album" class="span2">
            {% for album in form_albums %}
                <option value="{{ album.id }}">{{ album }}</option>
            {% endfor %}
            </select>
            <label>Location</label>
            <select name="location" class="span2">
                {% for location in form_locations %}
                <option value="{{ location.id }}">{{ location }}</option>
                
                {% endfor %}
            </select>
            <a href="#deletePhoto_{{ photo.id }}" data-toggle="modal" class="btn btn-danger">Delete <i class="icon-trash icon-white"></i></a>
            <input type="submit" value="Save" class="btn btn-success">
            </form>
        </div>
      <h5>{{ photo.title }}</h5>
      {% if photo.description %}
      <p>{{ photo.description }}</p>
      {% endif %}
      <span class="label {% if photo.thumbs_created %}label-success{% else %}label-important{% endif %}">{% if photo.thumbs_created %}Thumbnails Created{% else %}Thumnails Failed{% endif %}</span>
      <br/>
      <a href="#"><i class="icon-map-marker"></i>  {{ photo.location }}</a>
      
    </div>
    </li>
    {% if forloop.counter == 4 or forloop.counter == 8 or forloop.counter == 12 or forloop.counter == 16 %}
    </ul>
    {% endif %}
{% endfor %}

<div class="pagination">
    <ul>
        {% if photos.has_previous %}
        <li><a href="?page={{ photos.previous_page_number }}">Prev</a></li>
        {% endif %}
        {% if photos.previous_page_number %}
        <li><a href="?page={{ photos.previous_page_number }}">{{ photos.previous_page_number }}</a></li>
        {% endif %}
        <li class="active">
            <a href="#">{{ photos.number }}</a>
        </li>
        {% if photos.next_page_number %}
        <li><a href="?page={{ photos.next_page_number }}">{{ photos.next_page_number }}</a></li>
        {% endif %}
        {% if photos.has_next %}
        <li><a href="?page={{ photos.next_page_number }}">Next</a></li>
        {% endif %}
    </ul>
</div>


{% endblock main_content %}

{% block sidebar %}


{% endblock sidebar%}

{% block navigation %}
{% include "administrator/nav.html" with nav=1 %}
{% endblock navigation %}