
{% extends "base.html" %}
{% block title %}{{ photo.title }}{% endblock %}
{% block extra_head %}
<script src="http://maps.google.com/maps/api/js?sensor=false"></script>
<script>
  function initialize() {
    var blackStyles = [
{
featureType: 'all',
rules: [
{visibility: 'off'}
]
},
{
featureType: 'water',
rules: [
{visibility: 'on'},
{lightness: -100 }
]
}
];
    var blackMapType = new google.maps.StyledMapType(blackStyles,
    {name: "Black Map"});

  
  
    var latlng = new google.maps.LatLng({{ photo.location.latitude }},{{ photo.location.longitude }} );
    var myOptions = {
      zoom: 8,
      center: latlng,
      
      mapTypeId: google.maps.MapTypeId.ROADMAP,
       styles: blackStyles,    
    };
    var map = new google.maps.Map(document.getElementById("small_map"),
        myOptions);

      //var bounds = new google.maps.LatLngBounds();

      
      var latlng{{ photo.id }} = new google.maps.LatLng({{ photo.location.latitude }}, {{ photo.location.longitude }});
      var marker{{ photo.id }} = new google.maps.Marker({
         position: latlng{{ photo.id }},
         map: map,
         title: "{{ photo.title }}"
      });

      var content{{ photo.id }} = '<div id="content">'+
          
          
          '<p>{{ photo.title }}</p>' +
          
          '</div>';
      var infowindow{{ photo.id }} = new google.maps.InfoWindow({
          content: content{{ photo.id }}
      });
      google.maps.event.addListener(marker{{ photo.id }}, 'click', function() {
         infowindow{{ photo.id }}.open(map, marker{{ photo.id }});
      });

      //bounds.extend(latlng{{ photo.id }})
 

      //map.fitBounds(bounds);    
      map.mapTypes.set('black_map', blackMapType);
      map.setMapTypeId('black_map');

  }
</script>

{% endblock %}
{% block extra_body %}onLoad="initialize()"{% endblock %}
{% block main_content %}
{% load thumbnail %}
{% thumbnail photo.image "1024x768" as im %}
<img src="{{ im.url }}" class="main_image">
{% endthumbnail %}
            <aside>
                <style>
                    #small_map
                    {
                        border-radius: 5px;
                        margin-bottom: 10px;
                    }
                </style>
                <div id="small_map" style="width:100%; height:200px"></div>
                {% for img in nav_photos.object_list %}
                {% load thumbnail %}
                {% thumbnail img.image "150x150" crop="center" as im %}
                <a href="{{ img.get_absolute_url }}"><img src="{{ im.url }}"></a>
                {% endthumbnail %}
                {% endfor %}
                <div class="pagination">
            {% if nav_photos.has_previous %}
            <a href="?page={{ nav_photos.previous_page_number }}"><< Previous</a>
            <a href="?page={{ nav_photos.previous_page_number }}">{{ nav_photos.previous_page_number }}</a>
            {% endif %}
            {% if nav_photos.number %}
            <span class="current">{{ nav_photos.number }}</span>
            {% endif %}
            {% if nav_photos.has_next %}
            <a href="?page={{ nav_photos.next_page_number }}" class="inactive">{{ nav_photos.next_page_number }}</a>
            <a href="?page={{ nav_photos.next_page_number }}" class="inactive">Next >></a>
            {% endif %}
       </div>
            </aside>
            
{% endblock %}