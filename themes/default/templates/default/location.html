{% extends "default/base.html" %}
{% block nav %}
{% include "default/nav.html" with current=1 %}
{% endblock nav %}
{% block extra_head %}
<script src="http://maps.google.com/maps/api/js?sensor=false"></script>
<script>
  function initialize() {
    var blackStyles = [
{
featureType: 'all',
rules: [
{visibility: 'off'}
]
},
{
featureType: 'water',
rules: [
{visibility: 'on'},
{lightness: -100 }
]
}
];
    var blackMapType = new google.maps.StyledMapType(blackStyles,
    {name: "Black Map"});

  
  
    var latlng = new google.maps.LatLng({{ location.latitude }},{{ location.longitude }} );
    var myOptions = {
      zoom: 3,
      center: latlng,
      
      mapTypeId: google.maps.MapTypeId.ROADMAP,
       styles: blackStyles,    
    };
    var map = new google.maps.Map(document.getElementById("small_map"),
        myOptions);

      //var bounds = new google.maps.LatLngBounds();

      
      var latlng{{ location.id }} = new google.maps.LatLng({{ location.latitude }}, {{ location.longitude }});
      var marker{{ location.id }} = new google.maps.Marker({
         position: latlng{{ location.id }},
         map: map,
         title: "{{ location }}"
      });

      var content{{ location.id }} = '<div id="content">'+
          
          
          '<p>{{ location }}</p>' +
          
          '</div>';
      var infowindow{{ location.id }} = new google.maps.InfoWindow({
          content: content{{ location.id }}
      });
      google.maps.event.addListener(marker{{ location.id }}, 'click', function() {
         infowindow{{ location.id }}.open(map, marker{{ location.id }});
      });

      //bounds.extend(latlng{{ photo.id }})
 
        google.maps.event.addListener(map, 'mouseover', function() {
            map.setZoom(8);
        });
        google.maps.event.addListener(map, 'mouseout', function(){
            map.setZoom(3);
        });

      //map.fitBounds(bounds);    
      map.mapTypes.set('black_map', blackMapType);
      map.setMapTypeId('black_map');

  }
</script>
{% endblock extra_head %}
{% block extra_body %}onLoad="initialize()"{% endblock %}

{% block main_content %}

<div class="span8">
<ul class="thumbnails">
{% for photo in photos.object_list %}
    
    {% include "default/snippets/smaller_item.html" %}
    
{% endfor %}
</ul>
{% include "default/snippets/pagination.html" %}

</div>
<div class="span4">
    <div class="well">
        <h3>{{ location }}</h3>
        <div id="small_map"></div>
    </div>
</div>



{% endblock main_content %}